package cz.ondrejsmetak;

import cz.ondrejsmetak.tool.Log;
import java.io.IOException;
import java.lang.reflect.Field;
import java.security.Provider;
import java.security.Security;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.net.ServerSocketFactory;
import javax.net.ssl.SSLServerSocket;
import javax.net.ssl.SSLServerSocketFactory;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;

/**
 * Main application class
 *
 * @author Ondřej Směták <posta@ondrejsmetak.cz>
 */
public class Application {

	/**
	 * Main method
	 *
	 * @param args arguments from command line
	 */
	public static void main(String[] args) {

		//System.setProperty("javax.net.ssl.keyStore", "/home/fredomgc/Plocha/keystore/mySrvKeystore");
		//System.setProperty("javax.net.ssl.keyStorePassword", "lollol");
		
		

	/**
	 * Nyni funguje https://localhost:2222/
	 * Zalozeno na navodu zde http://stackoverflow.com/questions/32490752/https-socket-javax-net-ssl-sslhandshakeexception-no-cipher-suites-in-common
	 */
		
		
//		try {
//			ServerSocketFactory ssocketFactory = SSLServerSocketFactory.getDefault();
//			SSLServerSocket serverSocket = (SSLServerSocket) ssocketFactory.createServerSocket(2222);
//			SSLSocket client = (SSLSocket) serverSocket.accept();
//
//			client.setNeedClientAuth(false);
//			client.startHandshake();
//
//			System.err.println("Handshake dokoncen");
//
//		} catch (IOException ex) {
//			ex.printStackTrace();
//			Logger.getLogger(Application.class.getName()).log(Level.SEVERE, null, ex);
//		}

//		try {
//			System.out.println("Locating socket factory for SSL...");
//			SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();
//
//			System.out.println("Creating secure socket to");
//			SSLSocket socket = (SSLSocket) factory.createSocket("seznam.cz", 443);
//
//			System.out.println("Enabling all available cipher suites...");
//			String[] suites = socket.getSupportedCipherSuites();
//			socket.setEnabledCipherSuites(suites);
//
//			System.out.println("Registering a handshake listener...");
//			//socket.addHandshakeCompletedListener(new MyHandshakeListener());
//
//			System.out.println("Starting handshaking...");
//			socket.startHandshake();
//
//			System.out.println("Just connected to " + socket.getRemoteSocketAddress());
//		} catch (IOException ex) {
//			Logger.getLogger(Application.class.getName()).log(Level.SEVERE, null, ex);
//		}
		//---
		//---
		Controller controller = new Controller();
		try {
			controller.run();
		} catch (Exception ex) {
			if (ConfigurationRegister.getInstance().isDebug()) {
				Log.debugException(ex);
			} else {
				Log.errorln(ex);
			}
		}
	}

	/**
	 * NOTES
	 */
	/**
	 * cetrum certifikat
	 *
	 * 308205C6308204AEA003020102021063C139AA6B0B7AC58FFED60A9B7F32F7300D06092A864886F70D01010B05003041310B300906035504061302555331153013060355040A130C7468617774652C20496E632E311B3019060355040313127468617774652053534C204341202D204732301E170D3137303131303030303030305A170D3138303131303233353935395A3075310B300906035504061302435A310E300C06035504080C055072616861310E300C06035504070C05507261686131173015060355040A0C0E45636F6E6F6D69612C20612E732E31163014060355040B0C0D4954204F7065726174696F6E733115301306035504030C0C2A2E63656E7472756D2E637A30820122300D06092A864886F70D01010105000382010F003082010A0282010100D7DCCAC140E28C9660ED7EF5DA23745FF5314910459F1B04FE287D3F71B5D5A247C7838C05379308D691099CC52B977E58DBC6F4870C4ECF0607B3F8C95DB8D947BC233521F62C0A645745A34F363A3F0012CF65DE9CD5F5F4D9DBAFA2ADD5945875205CBC94D3B150CB6E3FC5BB18C8F08D73AC9E75BE159CB419FC410F7CAC583816B452FB2B80C00310734F02A8B375E4801897006FE602D7F11796DF8771938E7DA31998380C34022BF1DD62C63AE4486C9B1682A271F36FF9C03A31D010B2C3D93D2C3E36C766DFB9F8BC6504A8B81BF4B2C38055AB0BACEEF5EA01112F989F5FE2BDB45056C24EFEFE76BA798F8F2E1D2BF24F14199F9E8A3A18AAC5F10203010001A38202843082028030230603551D11041C301A820C2A2E63656E7472756D2E637A820A63656E7472756D2E637A30090603551D1304023000306E0603551D20046730653063060667810C0102023059302606082B06010505070201161A68747470733A2F2F7777772E7468617774652E636F6D2F637073302F06082B0601050507020230230C2168747470733A2F2F7777772E7468617774652E636F6D2F7265706F7369746F7279300E0603551D0F0101FF0404030205A0301F0603551D23041830168014C24F4857FCD14F9AC05D387D0E05DBD92EB55260302B0603551D1F042430223020A01EA01C861A687474703A2F2F746A2E73796D63622E636F6D2F746A2E63726C301D0603551D250416301406082B0601050507030106082B06010505070302305706082B06010505070101044B3049301F06082B060105050730018613687474703A2F2F746A2E73796D63642E636F6D302606082B06010505073002861A687474703A2F2F746A2E73796D63622E636F6D2F746A2E63727430820106060A2B06010401D6790204020481F70481F400F2007700DDEB1D2B7A0D4FA6208B81AD8168707E2E8E9D01D55C888D3D11C4CDB6ECBECC000001598909417E0000040300483046022100F29CC9DC09DE3A9F7DC3BE09EE7A1C3322BA0EBC6CC7BD70E8D73C1F0DD88E53022100DC23B77ED209A16E396C4D98F6F604EE85B665E1076C398D08452321A865F98A007700A4B90990B418581487BB13A2CC67700A3C359804F91BDFB8E377CD0EC80DDC1000000159890943250000040300483046022100DAFF3D9EAD5FC53549F872D65AC1E7C889CE0FF1B42141D7BCF8F09F8478E1E1022100BDD57B3F96B830FAAAA45581F1A374129A2405FF1B7FAEAC1E8756D92EA8E56C300D06092A864886F70D01010B0500038201010074F17A99C69ADDA2744CA14662B70C90B9DDFC3416E3DF39C4158128C6193C52D5A38DF7A1B5BA4684FF8113D6F8D63442A83AC1F3BEC519E1B2C31AEBADD91608B9EBE4C6F45555F14B7A1835083DD1EFAAE1260C3FD92DAC9C72526F88FB6350DB63CEDE73C2E82DAF649054FBA0576C9B784FF7CDBB968FFB62FD7A9F5A3B1BADFFDFC9FF0DCEDC1B81C34E6FE84B0629B8B0EC5F06FBBEEB89B2507AE3FAD62AFC9229E31BCFF3CA00F1277C17A48D5F10D7C64F1D49D38BF4542DF2ADD9C172462BFE28E401D957A301FA650FDC1E5FD9F9E7A9836524F3862FB2D48DDBA9A5D1C923F5433381C005FB96908B1BB9A984484F9AFE071DB2DF4AB253E397
	 */
	/**
	 * centrum thawte
	 *
	 * 308204B23082039AA00302010202101687D6886DE2300685233DBF11BF6597300D06092A864886F70D01010B05003081A9310B300906035504061302555331153013060355040A130C7468617774652C20496E632E31283026060355040B131F43657274696669636174696F6E205365727669636573204469766973696F6E31383036060355040B132F2863292032303036207468617774652C20496E632E202D20466F7220617574686F72697A656420757365206F6E6C79311F301D06035504031316746861777465205072696D61727920526F6F74204341301E170D3133313033313030303030305A170D3233313033303233353935395A3041310B300906035504061302555331153013060355040A130C7468617774652C20496E632E311B3019060355040313127468617774652053534C204341202D20473230820122300D06092A864886F70D01010105000382010F003082010A0282010100B2FC06FB0493D2EA59203B4485975239E710F07AE0B09440DA46F80C28BBB9CE60383FD2D811421B91AD49EE8FC7DE6CDE376FFD8B203C6DE774D3DCD52488418089EE36BEC4D5BE8D5313AAE4A5B8930ABEECDACD3CD43256EFD04EA0B897BB39501E6E65C3FDB2CEE059A94809C6FEBEAEFC3E3B8120978B8F46DF60640775BB1B86389F477B34CEA1D197AD76D89FB726DB79803648F2C537F8D932AE7CA45381C799A154382F4F75A0BB5AA5BBCDAC025B1902D51318A7CEAC745512058B9BA29546647238CD5A1B3A16A7BE71998C5403B8966C01D33E06983F21813B027E004753011E0E4643FB4B2DDC0B1AE82F98F87ED199AB136CA417DE6FF615F50203010001A382013B3082013730120603551D130101FF040830060101FF020100300E0603551D0F0101FF04040302010630320603551D1F042B30293027A025A0238621687474703A2F2F74312E73796D63622E636F6D2F5468617774655043412E63726C302F06082B0601050507010104233021301F06082B060105050730018613687474703A2F2F74322E73796D63622E636F6D30410603551D20043A30383036060A6086480186F8450107363028302606082B06010505070201161A68747470733A2F2F7777772E7468617774652E636F6D2F63707330290603551D1104223020A41E301C311A30180603550403131153796D616E746563504B492D312D353337301D0603551D0E04160414C24F4857FCD14F9AC05D387D0E05DBD92EB55260301F0603551D230418301680147B5B45CFAFCECB7AFD31921A6AB6F346EB574850300D06092A864886F70D01010B050003820101008D06DE43C97602CAD923975EF363D77D44C20F6B0AF507E58BB8FAE0A3FA6B8092B5032CC537E0C2E595B5927018284294EE4B776A010F8B23EC564DF40069E584C8E2EADE5B3EF63C073A94CA6C27B1CC831A607127D2BF02F51E44D348D5A6D37621009CFA9864EB17363FEB1B3C3EA6B1D958060E72D968BEF1A720D752E4A4771F71709D55358537E11D4D94C2707F95406E4B7DB2B4292A0379C8B94C676104A08B27FF5900EB557FC6B733352D5E4EACB8EA12C5E8F7B9ABBE74922CB7D94DCA842F1CC2F0727CB2316ECF80E5880736517BBA61AF6D8D235B34A395BCA2317FF2F5E7B7E8EFC4B52732E9F79E69C72BE8BEBB0CAAE7EA600000000000
	 */
//openssl s_client -showcerts -cipher 'AES128-SHA' -connect localhost:2222
}
